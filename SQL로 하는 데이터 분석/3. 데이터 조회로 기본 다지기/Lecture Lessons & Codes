SELECT : 테이블의 데이터를 조회할 때 사용
SELECT * : 각 로우의 모든 칼럼 값을 보여줘라
SELECT email, age, address : email age address 칼럼만 보여줘라
FROM : 어느 테이블에서 부터 데이터를 조회해야하는지~
copang_main.member : copang_main이라는 데이터베이스의 member라는 테이블 -> member라고만 해도 되지만 서로 다른 데이터베이스트 안에 같은 이름을 가진 테이블이 있는 경우를 생각해서 데이터베이스까지 써줬다
WHERE : 특정 조건만 만족하는 로우들만 조회할 때 쓴다
WHERE email = 'taehos@hanmail.net' -> 특정 이메일 값을 가지고 있는 로우만 출력
WHERE age NOT BETWEEN 30 AND 39 -> 나이가 30과 39 사이에 있지 않은 로우만 출력

-----------------------------------------------------------------------------------------------------------------------------------------------
1. SQL 문 끝에는 항상 세미콜론을 써줘야합니다. 

하나의 SQL 문 끝에는 세미콜론을 써줘야합니다. SQL 문법 상 세미콜론이 하나의 SQL 문을 종결하는 단위이기 때문에 그런 건데요. 간혹 이 세미콜론을 쓰는 것을 잊고 '왜 이 SQL 문이 실행되지 않지?'라고 고민하시는 분들이 있습니다. SQL 문의 끝에는 세미콜론! 절대 잊지마세요.

(Workbench에서는 하나의 SQL 문인 경우 세미콜론을 입력하지 않아도 알아서 인식하고 잘 실행해줍니다. 하지만 Workbench에서도 하나 이상의 SQL 문들이 있는데 세미콜론이 없으면 그 SQL 문들은 실행되지 않습니다)

2. SQL 문 안에는 공백이나 개행 등을 자유롭게 넣을 수 있습니다. 

예를 들어 이런 식으로 엄청 많은 공백을 주거나,

SQL 문의 일부분을 한 줄 내리고, 탭을 입력한 후에 쓰는 것도 가능합니다. 

어떤 방식으로 쓰든, 구분되어야할 키워드들이 최소한 하나 이상의 공백으로 구분되어 있고, 세미콜론으로 마무리되어 있으면 실행에는 문제가 없습니다. 이런 점을 이용해서 길이가 긴 SQL 문을 쓸 때는 개행(줄바꿈), 탭 등을 적절하게 활용해서 가독성을 높이는 것이 좋습니다. 
3. SQL 문의 대소문자 구분 문자

이전 영상에서 마지막에 썼던 SQL 문을 보면, MySQL에 기본으로 내장된 키워드들(이런 것들을 보통 ‘예약어’라고 합니다.)은 대문자로 써주고, 나머지 부분은 소문자로 써줬습니다. 

지금 빨간색 박스가 MySQL에 원래부터 존재하는 예약어, 파란색 박스가 사용자가 지정한 부분입니다.

일단 빨간색 박스에서 보이는 것처럼 MySQL의 예약어는 대문자로 적는 것이 관례이고, 보기에도 좋습니다.

그리고 파란색 부분에 등장하는 데이터베이스 이름, 테이블 이름, 컬럼 이름 등은 대소문자를 가리지 않고, 실제로 존재하는 것의 이름을 적어주면 됩니다. 

데이터베이스, 테이블, 컬럼 등의 이름을 짓는 것도 회사마다 일종의 규약(convention)들이 있을 텐데요. 실무에서는 그런 규약에 맞게 지어진 이름들을 자주 작성하게 되겠죠?

빨간색 박스로 표시된 ‘예약어’들은 꼭 이렇게 대문자로만 써야할까요? 그건 아닙니다. ‘예약어’들을 모두 소문자로 바꾸고 실행해도

위 그림과 같이 실행은 잘 됩니다. 하지만 가독성을 위해 ‘예약어’만큼은 꼭 대문자로 쓰는 습관을 들이도록 하세요.    
4. 데이터베이스 이름과 테이블 이름

이전 영상에서는 데이터베이스 이름 뒤에 점(.)을 붙이고 그 다음에 테이블 이름을 썼습니다. 이렇게 쓰면 해당 데이터베이스 안의 테이블을 가리키는 거라고 했죠? 실무에서는 서로 다른 데이터베이스에, 같은 이름의 테이블이 존재할 수도 있기 때문에 이렇게 써주는 게 좋다고 했는데요. 

하지만 항상 그럴 필요는 없습니다. 아래 그림을 보세요. 

지금 왼쪽 SCHEMAS 패널 부분의 copang_main을 클릭해서, 활성화해두었습니다. 이건 지금 copang_main 데이터베이스를 사용할 거라고 지정한 것과 같은데요. 이런 상태에서는 그냥 member 라고 테이블 이름만 적어줘도 됩니다. 

또는 아예 SQL 문으로 어떤 데이터베이스를 쓰겠다고 확실하게 정하는 것도 가능합니다. 

위 그림의 USE copang_main; 은 copang_main이라는 데이터베이스를 사용하겠다고 확실히 선언하는 것입니다. 그리고 그 뒤로는 그냥 테이블 이름만 써도 괜찮습니다. 

앞으로 여러분이 배울 영상, 노트, 퀴즈, 과제에서는 상황에 따라 데이터베이스 이름을 테이블 이름 앞에 붙이기도 하고, 붙이지 않기도 할 건데요. 그때그때 상황에 맞게 혼용해서 쓸 거니까 당황하실 필요없이, 어떤 테이블을 가리키는지에만 집중하시면 됩니다. 
--------------------------------------------------------------------------------------------------------------------------------------------------------

*USE copang_main; 은 copang_main이라는 데이터베이스를 사용하겠다고 확실히 선언하는 것입니다. 그리고 그 뒤로는 그냥 테이블 이름만 써도 괜찮습니다. 

*WHERE 쓰는 법들 예시
SELECT * FROM copang_main.member WHERE age >= 20;
SELECT * FROM copang_main.member WHERE age BETWEEN 30 AND 39; -> 30대만 조회 -> BETWEEN A AND B 는 A 부터 B 까지를 의미한다 -> A와 B도 포함된다
SELECT * FROM copang_main.member WHERE age NOT BETWEEN 30 AND 39; -> 30대만 제외하고 조회

*DATE 타입의 WHERE문 용법 예시
SELECT * FROM copang_main.member WHERE sign_up_day >= '2019-01-01';
SELECT * FROM copang_main.member WHERE sign_up_day BETWEEN '2019-01-01' AND '2019-12-31';

*문자열 패턴 매칭
WHERE address LIKE '서울%'; -> address가 서울로 시작하는 모든 로우 조회
WHERE address LIKE '%고양시%'; -> address가 고양시를 포함한 모든 로우 조회
-> %는 임의의 문자열을 의미한다
----------------------------------------------------------------------------------------------------------------------------------------------------------------
1. 같지 않음 (!=, <>)

이전 영상에서는 '같음'을 나타내는 등호(=)를 배웠습니다. 그렇다면 '같지 않음'를 표현하려면 어떻게 해야할까요? != 기호나 <> 기호를 사용하면 됩니다

2. 이 중에 있는~ (IN)

이전 영상에서 우리는 어떤 범위를 나타내기 위해 사용하는 BETWEEN a AND b(a부터 b까지) 구문을 배웠습니다. 그런데 만약 이렇게 연속된 범위 말고, 여러 값들 중에서 해당하는 값이 있는 row들만 추려야할 때도 있는데요. 예를 들어, 현재 회원 중에서 나이가 딱 20살, 또는 딱 30살인 회원들만 조회하려면 어떻게 해야 할까요? 이렇게 써주면 됩니다. 

지금 WHERE age IN (20, 30)은 age 컬럼의 값이 20이거나, 30이어야 한다는 조건을 의미합니다. 결과를 보니 잘 조회되었죠? 이 IN은 상당히 유용하게 사용되는 조건 표현식이니까 잘 기억해두세요. 

3. 한 글자를 나타내는 _ 

이전 영상에서 문자열 패턴 매칭 조건을 배울 때 LIKE 뒤의 ‘%’는 임의의 길이를 가진 문자열(0자도 포함)을 나타낸다고 했습니다. 그런데 %말고 언더바(_) 하나 기호도 있는데요. LIKE 뒤의 언더바 하나는 문자 하나를 나타냅니다. 

잠깐 member 테이블에서 이메일 주소가 c로 시작하고, 그 뒤에 여섯 글자가 있는 row들을 조회해볼까요? 

지금 LIKE 뒤의 'c_____@%' 부분이 이해되시나요? 지금 언더바가 소문자 c 뒤에 5개가 있는 상태인데요. 이 표현식은 c로 시작하고, 그 뒤에 다섯 글자 그리고 골뱅이 하나, 그 뒤에 임의의 길이를 가진 문자열이 있는 문자열 패턴을 나타냅니다. 그리고 이 패턴에 해당하는 문자열인 codeit@naver.com과 cowboy@codeit.kr을 email 주소로 가진 회원들만 잘 조회됐습니다.
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL을 어느 정도 배우고 나서도 많은 분들이 실무에서 SQL을 자유롭게 사용하지 못하는 경우가 많습니다.

그 주된 이유 중 하나는 바로 SQL에서 제공하는 함수를 자유자재로 사용하지 못하기 때문입니다.

사실 SQL의 핵심 기능들은, 다 배우고 나면 그렇게 어렵지는 않습니다. 하지만 SQL 문을 아무리 잘 쓰더라도 저장된 데이터를 내가 원하는 형태로 변환하기 위해 필요한 함수를 모르면 원하는 작업을 할 수가 없습니다. 그래서 SQL에서 쓸 수 있는 다양한 함수들을 익히는 것도 중요한데요.

이번 토픽에서는 SQL을 쓸 때, 여러분이 필수적으로 알아야할 함수들을 차근차근 노트로 정리해나갈 예정입니다.

일단 이번 노트에서는 DATE 타입의 값들을 다루는 대표적인 함수들을 다뤄보겠습니다. 

우리가 테이블을 다루다 보면 날짜를 나타내는 값들, 정확히 말해 DATE 데이터 타입을 갖는 컬럼의 값들을 다뤄야할 일들이 많습니다. 

이때 사용할 수 있는 함수들을 배워보겠습니다.
1. 연도, 월, 일 추출하기

DATE 타입의 값에서 연도(year)만, 혹은 월(month)만, 혹은 일(day)만 추출할 수 있습니다. 어떻게 할 수 있는지 하나씩 살펴볼게요.
(1) 1992년에 태어난 회원들만 조회하기

위 그림에서처럼 YEAR 함수를 사용하면 날짜 값에서 연도만 뽑아낼 수 있습니다. 
(2) 여름(6, 7, 8월)에 가입한 회원들만 조회하기 

위 그림처럼 MONTH 함수를 사용하면 날짜값에서 월만 뽑아낼 수 있습니다. 지금 그 뒤에는 이전 노트에서 배운 IN 조건 표현식을 사용해봤습니다. 위 그림을 보니 여름에 가입한 회원들만 잘 조회되네요. 
(3) 각 달의 후반부(15일~31일)에 가입했던 회원들만 조회하기

DAYOFMONTH 함수는 날짜값에서 일만 뽑아낼 수 있습니다. 그 뒤에는 이전에 배운 BETWEEN a AND b 구문을 사용해봤습니다. 각 달의 후반부(15일~31일) 사이에 가입한 회원들만 잘 조회되네요. 
2. 날짜 간의 차이 구하기

날짜 간의 차이를 구하는 함수도 있습니다. DATEDIFF라는 함수인데요. 여기서 DATE는 날짜, DIFF는 Difference의 줄임말로 '차이'라는 뜻입니다.

DATEDIFF(날짜 a, 날짜 b)를 사용하면 '날짜 a - 날짜 b'를 해서 그 차이 일수를 알려줍니다. 예를 들어,

DATEDIFF(’2018-01-05’, ’2018-01-03’)의 값은 2입니다.

member 테이블에서 각 회원이 가입한 일자가 2019년 1월 1일을 기준으로 몇 일 이후인지를 알아보겠습니다. 아래 SQL 문을 자세히 살펴보세요.

실행결과에는 총 3개의 컬럼이 보입니다. email, sign_up_day, 그리고 sign_up_day에서 2019년 1월 1일을 뺀 값이 담긴 컬럼, 이렇게 3개인데요. 꼭 테이블에 원래 있던 컬럼이 아니더라도 조회할 때는 이런 식으로 새로운 컬럼을 붙여서 볼 수도 있습니다. 

지금 보니까 가장 최근에는 cowboy라는 회원이 가입했고, 가입한지 가장 오래된 회원은 2011년에 가입한 xMan_series라는 회원이라는 것을 알 수 있습니다. 

그리고 이것 말고도 오늘 날짜를 기준으로 살펴보는 것도 가능한데요. 오늘 날짜를 구하는 함수는 CURDATE()입니다. 

이 노트가 작성된 날짜는 2020년 6월 2일입니다. 위 그림을 보니 오늘 날짜와의 차이도 잘 출력되었죠? 

이번엔 회원들이 몇 살이었을 때 코팡에 가입했는지를 알아볼까요? 가입일(sign_up_day)-생일(birthday) 값을, 1년이 365일이니까 365로 나눠주면 각 회원이 몇 살일 때, 코팡에 가입했는지 알 수 있습니다. 

결과를 보니까 많은 회원들이 20대, 30대일 때 많이 가입을 했네요. 
3. 날짜 더하기 빼기 

날짜에서 며칠을 더하고 빼는 것도 가능한데요. 더하는 함수는 DATE_ADD(), 빼는 함수는 DATE_SUB()입니다. 

예를 들어, 가입일(sign_up_day) 기준으로 300일 이후의 날짜를 구하려면 이렇게 쓰면 됩니다. 

지금 DATE_ADD(sign_up_day, INTERVAL 300 DAY)라고 적힌 부분은 sign_up_day 컬럼의 값에 300일을 더한 날짜를 나타냅니다. 

만약 가입일(sign_up_day) 기준 250일 이전의 날짜를 구하고 싶으면 이렇게 쓰면 됩니다.

특정 날짜에서 몇 일 후, 몇 일 전 날짜를 구해야할 때 이 함수들을 쓰면 유용하겠죠? 
4. UNIX Timestamp 값 

지금 member 테이블에서 날짜를 나타내는 컬럼(birthday, sign_up_day)은 있지만, 시간을 별도로 나타내는 컬럼은 없습니다. 날짜뿐만 아니라 시간까지 포함하는 컬럼이라면 DATETIME이라는 데이터 타입을 사용해야하는데요. DATETIME 타입의 컬럼에는 보통 '2018-12-31 23:54:59’ 이런 식으로 값들이 저장되어 있습니다.

그런데 문제는 어떤 테이블에는 날짜와 시간이 이렇게 예쁜 형식으로 적혀있는게 아니라, 1553526000 이런 식으로 상당히 큰 숫자값이 적혀있는 경우들이 꽤 많다는 겁니다. 이것 또한 날짜와 시간을 나타내는 값인데요. 이런 형식의 날짜시간 값을 UNIX Timestamp라고 합니다. UNIX Timestamp는 특정 날짜의 특정 시간을, 1970년 1월 1일을 기준으로, 총 몇 초가 지났는지로 나타낸 값입니다. 

정확히 어떤 건지 보여드리겠습니다. DATE 타입의 값을 Unix Timestamp로 바꿔주는 함수가 있는데요. sign_up_day 컬럼의 날짜값을 한번 Unix Timestamp로 변환해보겠습니다.

UNIX_TIMESTAMP라는 함수를 쓰면 되는데요. 지금 빨간 박스 안에 상당히 큰 숫자값들이 보입니다. 이 값들은 모두 각 날짜가 1970년 1월 1일을 기준으로 몇 초가 지난 것인지를 나타냅니다. 실무에서 여러분은 깔끔한 형식의 날짜 또는 시간뿐만 아니라 이런 Unix Timestamp를 보게될 수도 있습니다.

만약 여러분이 테이블에서 이런 Unix timestamp를 보게 된다면 이걸 사람이 읽을 수 있는 날짜 형태로 바꿔서 보면 되는데요.

그럴 때는 FROM_UNIXTIME 함수를 사용하면 됩니다. 

Unix timestamp를 다시 집어넣었더니 원래 날짜가 그대로 잘 나왔습니다. 대신 이번엔 시간 정보도 포함해서(00:00:00) 출력되었네요. 

혹시 날짜와 시간을 나타내는 컬럼이라고 하는데 뭔가 큰 숫자가 들어있다면, Unix timestamp가 아닌지 의심해보세요. 그리고 방금 배운 함수로 DATETIME 형식으로 변환해서 보시면 됩니다.

자, 이때까지 DATE 타입의 값들을 다룰 수 있는 유용한 함수들을 알아보았습니다. 이밖에도 '시간을 나타내는 TIME 타입', 방금 설명했던 '날짜, 시간을 함께 나타내는 DATETIME 타입', 그리고 이것들과 관련된 또다른 함수들도 많습니다. 혹시 이런 내용들에 관해 더 자세하게 알고 싶은 분들은 아래 MySQL 공식 매뉴얼을 참조하세요.

날짜, 시간 관련 데이터 타입 : https://dev.mysql.com/doc/refman/8.0/en/date-and-time-types.html

날짜, 시간 관련 함수 : https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html

그리고 MySQL이 아닌 다른 DBMS를 쓰는 분들은 이 페이지 내용을 보고 그대로 따라하시면 안 되고, 여러분이 쓰시는 DBMS의 매뉴얼 페이지를 참조해서 원하는 함수를 찾아야합니다. 이번 토픽에서 SQL의 기초 개념과 기본 함수들을 배우고, 여러분이 매 상황마다 필요한 함수들을 잘 검색하는 능력을 기른다면 여러분의 데이터 분석 능력은 급속도로 좋아질 겁니다. 
